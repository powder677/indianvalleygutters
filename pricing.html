<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Flat Rate Gutter Cleaning Pricing – Souderton & Indian Valley</title>
   <meta name="description" content="Simple, flat-rate pricing for gutter cleaning in the Indian Valley. $199 for one-story homes and $269 for two-story homes. Book your service online in minutes.">
   
   <script src="https://cdn.tailwindcss.com"></script>
   
   <link rel="preconnect" href="https://fonts.googleapis.com">
   <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
   <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">

   <!-- Firebase SDKs -->
   <script type="module">
     import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
     import { getFirestore, collection, addDoc, query, where, getDocs, orderBy } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

     const firebaseConfig = {
       apiKey: "AIzaSyA84MPC1jnfsboWKPahpFyJ_1o35gDFPmw",
       authDomain: "indian-valley-gutters.firebaseapp.com",
       projectId: "indian-valley-gutters",
       storageBucket: "indian-valley-gutters.firebasestorage.app",
       messagingSenderId: "581484441338",
       appId: "1:581484441338:web:50b2225831fcf17b902343"
     };

     const app = initializeApp(firebaseConfig);
     const db = getFirestore(app);

     // Make Firebase available globally
     window.db = db;
     window.firebaseModules = { collection, addDoc, query, where, getDocs, orderBy };
   </script>

   <style>
      body {
         font-family: 'Inter', sans-serif;
      }

      .calendar-day {
         transition: all 0.2s ease-in-out;
         min-height: 80px;
         display: flex;
         flex-direction: column;
         justify-content: flex-start;
         align-items: center;
         padding: 8px 4px;
      }

      .calendar-day:not(.disabled):not(.other-month):hover {
         background-color: #dbeafe;
         cursor: pointer;
         transform: scale(1.02);
      }

      .calendar-day.selected {
         background-color: #2563eb;
         color: white;
      }

      .calendar-day.disabled {
         color: #9ca3af;
         cursor: not-allowed;
         opacity: 0.5;
      }

      .calendar-day.other-month {
         color: #d1d5db;
         background-color: #f9fafb;
      }

      .calendar-day.has-appointments {
         background-color: #fef3c7;
         border: 2px solid #f59e0b;
      }

      .calendar-day.fully-booked {
         background-color: #fee2e2;
         border: 2px solid #ef4444;
      }

      .appointment-dot {
         width: 8px;
         height: 8px;
         border-radius: 50%;
         margin: 1px;
      }

      .time-slot {
         transition: all 0.2s ease-in-out;
      }

      .time-slot:not(.booked):hover {
         background-color: #dbeafe;
         cursor: pointer;
         transform: translateY(-2px);
      }

      .time-slot.selected {
         background-color: #2563eb;
         color: white;
      }

      .time-slot.booked {
         background-color: #fca5a5;
         color: #991b1b;
         cursor: not-allowed;
         opacity: 0.7;
      }

      .success-message {
         background-color: #dcfce7;
         border: 1px solid #16a34a;
         color: #166534;
      }

      .error-message {
         background-color: #fef2f2;
         border: 1px solid #dc2626;
         color: #991b1b;
      }

      .loading {
         opacity: 0.6;
         pointer-events: none;
      }
   </style>
</head>

<body class="bg-gray-50 text-gray-800">

   <!-- Header & Navigation -->
   <header class="bg-white shadow-sm sticky top-0 z-50">
      <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
         <a href="index.html" class="text-2xl font-bold text-gray-900">
            Indian Valley <span class="text-blue-600">Gutters</span>
         </a>
         <div class="hidden md:flex space-x-6 items-center">
            <a href="index.html" class="text-gray-600 hover:text-blue-600">Home</a>
            <a href="pricing.html" class="text-blue-600 font-semibold">Pricing & Booking</a>
            <a href="about.html" class="text-gray-600 hover:text-blue-600">About Us</a>
            <a href="contact.html" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition">Contact Us</a>
         </div>
      </nav>
   </header>

   <!-- Main Content -->
   <main class="py-16 md:py-24">
      <div class="container mx-auto px-6">

         <!-- Page Header -->
         <div class="text-center mb-12 md:mb-16">
            <h1 class="text-4xl md:text-5xl font-extrabold text-gray-900 mb-4">Simple, Upfront Pricing</h1>
            <p class="text-lg text-gray-600 max-w-2xl mx-auto">No hidden fees, no complicated quotes. Just straightforward pricing to get the job done right.</p>
         </div>

         <!-- Pricing Grid -->
         <div class="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto mb-16">
            <div class="bg-white rounded-lg shadow-lg p-8 border-t-4 border-blue-600">
               <h2 class="text-2xl font-bold text-gray-900 mb-2">1-Story Home</h2>
               <p class="text-5xl font-extrabold text-gray-900 mb-4">$199</p>
               <p class="text-gray-600 mb-6">Complete gutter and downspout cleaning for any single-story house.</p>
               <ul class="space-y-2 text-gray-700 mb-8">
                  <li class="flex items-center"><svg class="w-5 h-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                     </svg>Full Gutter System Cleanout</li>
                  <li class="flex items-center"><svg class="w-5 h-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                     </svg>Downspout Flushing</li>
                  <li class="flex items-center"><svg class="w-5 h-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                     </svg>Debris Bagged & Removed</li>
                  <li class="flex items-center"><svg class="w-5 h-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                     </svg>Post-Service Cleanup</li>
               </ul>
            </div>
            <div class="bg-white rounded-lg shadow-lg p-8 border-t-4 border-blue-800">
               <h2 class="text-2xl font-bold text-gray-900 mb-2">2-Story Home</h2>
               <p class="text-5xl font-extrabold text-gray-900 mb-4">$269</p>
               <p class="text-gray-600 mb-6">Complete gutter and downspout cleaning for any two-story house.</p>
               <ul class="space-y-2 text-gray-700 mb-8">
                  <li class="flex items-center"><svg class="w-5 h-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                     </svg>Full Gutter System Cleanout</li>
                  <li class="flex items-center"><svg class="w-5 h-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                     </svg>Downspout Flushing</li>
                  <li class="flex items-center"><svg class="w-5 h-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                     </svg>Debris Bagged & Removed</li>
                  <li class="flex items-center"><svg class="w-5 h-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                     </svg>Post-Service Cleanup</li>
               </ul>
            </div>
         </div>

         <!-- Booking Form Section -->
         <section id="booking" class="bg-white p-8 rounded-lg shadow-md max-w-7xl mx-auto mb-16">
            <h2 class="text-3xl font-bold text-center text-gray-900 mb-8">Schedule Your Service Instantly</h2>

            <!-- Success/Error Messages -->
            <div id="messageContainer" class="mb-6 hidden">
               <div id="messageContent" class="p-4 rounded-lg text-center"></div>
            </div>

            <!-- Loading Indicator -->
            <div id="loadingIndicator" class="text-center mb-6">
               <p class="text-gray-600">Loading available appointments...</p>
            </div>

            <!-- Calendar and Booking Form Container -->
            <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">

               <!-- Large Calendar UI -->
               <div class="lg:col-span-3">
                  <div class="bg-gray-50 p-6 rounded-lg shadow-inner">
                     <div class="flex items-center justify-between mb-6">
                        <button id="prevMonth" class="p-3 rounded-full hover:bg-gray-200 transition-colors">
                           <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                           </svg>
                        </button>
                        <h3 id="monthYear" class="text-2xl font-bold text-gray-900"></h3>
                        <button id="nextMonth" class="p-3 rounded-full hover:bg-gray-200 transition-colors">
                           <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                           </svg>
                        </button>
                     </div>
                     
                     <div class="grid grid-cols-7 gap-2 text-center mb-4">
                        <div class="font-semibold text-gray-700 p-3 text-lg">Sun</div>
                        <div class="font-semibold text-gray-700 p-3 text-lg">Mon</div>
                        <div class="font-semibold text-gray-700 p-3 text-lg">Tue</div>
                        <div class="font-semibold text-gray-700 p-3 text-lg">Wed</div>
                        <div class="font-semibold text-gray-700 p-3 text-lg">Thu</div>
                        <div class="font-semibold text-gray-700 p-3 text-lg">Fri</div>
                        <div class="font-semibold text-gray-700 p-3 text-lg">Sat</div>
                     </div>
                     
                     <div id="calendarGrid" class="grid grid-cols-7 gap-2 text-center mb-6">
                        <!-- Calendar days will be generated here by JavaScript -->
                     </div>

                     <div class="flex items-center justify-center space-x-6 text-sm">
                        <div class="flex items-center">
                           <div class="w-4 h-4 bg-green-200 border-2 border-green-500 rounded mr-2"></div>
                           <span>Available</span>
                        </div>
                        <div class="flex items-center">
                           <div class="w-4 h-4 bg-yellow-200 border-2 border-yellow-500 rounded mr-2"></div>
                           <span>Partially Booked</span>
                        </div>
                        <div class="flex items-center">
                           <div class="w-4 h-4 bg-red-200 border-2 border-red-500 rounded mr-2"></div>
                           <span>Fully Booked</span>
                        </div>
                        <div class="flex items-center">
                           <div class="w-4 h-4 bg-gray-200 rounded mr-2"></div>
                           <span>Unavailable</span>
                        </div>
                     </div>
                  </div>

                  <!-- Time Slots -->
                  <div id="timeSlotsContainer" class="mt-6 hidden">
                     <h4 class="font-bold text-xl mb-4">Available Times for <span id="selectedDateText" class="text-blue-600"></span>:</h4>
                     <div id="timeSlots" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3">
                        <!-- Time slots will be generated here -->
                     </div>
                  </div>
               </div>

               <!-- Booking Form -->
               <div class="lg:col-span-1">
                  <div class="bg-blue-50 p-6 rounded-lg">
                     <h3 class="text-xl font-bold mb-4 text-gray-900">Book Your Service</h3>
                     <form id="bookingForm" class="space-y-4">
                        <div>
                           <label for="name" class="block text-sm font-medium text-gray-700 mb-1">Full Name *</label>
                           <input type="text" name="name" id="name" required class="w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500">
                        </div>
                        <div>
                           <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email *</label>
                           <input type="email" name="email" id="email" required class="w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500">
                        </div>
                        <div>
                           <label for="phone" class="block text-sm font-medium text-gray-700 mb-1">Phone *</label>
                           <input type="tel" name="phone" id="phone" required class="w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500">
                        </div>
                        <div>
                           <label for="address" class="block text-sm font-medium text-gray-700 mb-1">Address *</label>
                           <input type="text" name="address" id="address" required class="w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500">
                        </div>
                        <div>
                           <label for="serviceType" class="block text-sm font-medium text-gray-700 mb-1">Service Type *</label>
                           <select id="serviceType" name="serviceType" required class="w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500">
                              <option value="">Select service</option>
                              <option value="1-story">1-Story - $199</option>
                              <option value="2-story">2-Story - $269</option>
                           </select>
                        </div>
                        <div>
                           <label for="notes" class="block text-sm font-medium text-gray-700 mb-1">Special Instructions</label>
                           <textarea name="notes" id="notes" rows="2" class="w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500" placeholder="Any special requests..."></textarea>
                        </div>
                        
                        <div id="selectedAppointment" class="hidden bg-white p-3 rounded border">
                           <h5 class="font-semibold text-gray-900 mb-2">Selected Appointment:</h5>
                           <p id="appointmentDetails" class="text-sm text-gray-600"></p>
                        </div>

                        <button type="submit" id="submitBtn" class="w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700 transition disabled:bg-gray-400 disabled:cursor-not-allowed" disabled>
                           Book Appointment
                        </button>
                     </form>
                  </div>
               </div>
            </div>
         </section>

         <!-- Additional Information -->
         <section class="bg-blue-50 p-8 rounded-lg max-w-4xl mx-auto">
            <h3 class="text-2xl font-bold text-center text-gray-900 mb-4">What to Expect</h3>
            <div class="grid md:grid-cols-2 gap-6 text-gray-700">
               <div>
                  <h4 class="font-semibold mb-2">✓ Professional Service</h4>
                  <p class="text-sm">Our fully insured team arrives on time with all necessary equipment.</p>
               </div>
               <div>
                  <h4 class="font-semibold mb-2">✓ Complete Cleanup</h4>
                  <p class="text-sm">We bag and remove all debris, leaving your property spotless.</p>
               </div>
               <div>
                  <h4 class="font-semibold mb-2">✓ Quality Guarantee</h4>
                  <p class="text-sm">If you're not satisfied, we'll make it right at no additional cost.</p>
               </div>
               <div>
                  <h4 class="font-semibold mb-2">✓ Fair Weather Policy</h4>
                  <p class="text-sm">We'll reschedule if weather conditions aren't safe for cleaning.</p>
               </div>
            </div>
         </section>
      </div>
   </main>

   <!-- Footer -->
   <footer class="bg-gray-900 text-white">
      <div class="container mx-auto px-6 py-8 text-center">
         <p>© 2024 Indian Valley Gutters. All Rights Reserved.</p>
         <p class="text-sm text-gray-400 mt-2">Serving Souderton, Telford, Harleysville, Lansdale, Skippack, Upper Gwynedd, Quakertown, and the Indian Valley, PA area.</p>
      </div>
   </footer>

   <!-- JavaScript -->
   <script type="module">
      class BookingSystem {
         constructor() {
            this.currentDate = new Date();
            this.selectedDate = null;
            this.selectedTime = null;
            this.bookings = {};
            this.timeSlots = [
               { time: '8:00 AM', value: '08:00' },
               { time: '10:00 AM', value: '10:00' },
               { time: '12:00 PM', value: '12:00' },
               { time: '2:00 PM', value: '14:00' },
               { time: '4:00 PM', value: '16:00' }
            ];
            
            this.init();
         }

         async init() {
            await this.loadBookings();
            this.renderCalendar();
            this.setupEventListeners();
            document.getElementById('loadingIndicator').classList.add('hidden');
         }

         async loadBookings() {
            try {
               const { collection, query, where, getDocs } = window.firebaseModules;
               const endDate = new Date(2025, 8, 15); // September 15, 2025
               const startDate = new Date();
               
               const bookingsQuery = query(
                  collection(window.db, 'bookings'),
                  where('date', '>=', startDate.toISOString().split('T')[0]),
                  where('date', '<=', endDate.toISOString().split('T')[0])
               );
               
               const querySnapshot = await getDocs(bookingsQuery);
               
               querySnapshot.forEach((doc) => {
                  const data = doc.data();
                  const dateKey = data.date;
                  if (!this.bookings[dateKey]) {
                     this.bookings[dateKey] = [];
                  }
                  this.bookings[dateKey].push(data.time);
               });
               
            } catch (error) {
               console.error('Error loading bookings:', error);
               // Add some sample bookings as fallback
               this.generateSampleBookings();
            }
         }

         generateSampleBookings() {
            // Generate some sample bookings as fallback
            const dates = [
               '2025-08-25', '2025-08-26', '2025-08-28', '2025-08-30',
               '2025-09-02', '2025-09-03', '2025-09-05', '2025-09-08',
               '2025-09-10', '2025-09-12', '2025-09-15'
            ];
            
            dates.forEach(date => {
               const numBookings = Math.floor(Math.random() * 3) + 1;
               this.bookings[date] = [];
               
               for (let i = 0; i < numBookings; i++) {
                  const randomSlot = this.timeSlots[Math.floor(Math.random() * this.timeSlots.length)];
                  if (!this.bookings[date].includes(randomSlot.value)) {
                     this.bookings[date].push(randomSlot.value);
                  }
               }
            });
         }

         setupEventListeners() {
            document.getElementById('prevMonth').addEventListener('click', () => {
               this.currentDate.setMonth(this.currentDate.getMonth() - 1);
               this.renderCalendar();
            });

            document.getElementById('nextMonth').addEventListener('click', () => {
               this.currentDate.setMonth(this.currentDate.getMonth() + 1);
               this.renderCalendar();
            });

            document.getElementById('bookingForm').addEventListener('submit', (e) => {
               e.preventDefault();
               this.handleBookingSubmission();
            });
         }

         renderCalendar() {
            const year = this.currentDate.getFullYear();
            const month = this.currentDate.getMonth();
            
            // Update month/year display
            const monthNames = [
               'January', 'February', 'March', 'April', 'May', 'June',
               'July', 'August', 'September', 'October', 'November', 'December'
            ];
            document.getElementById('monthYear').textContent = `${monthNames[month]} ${year}`;

            // Get first day of month and number of days
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const daysInMonth = lastDay.getDate();
            const startingDayOfWeek = firstDay.getDay();

            // Clear calendar grid
            const calendarGrid = document.getElementById('calendarGrid');
            calendarGrid.innerHTML = '';

            // Add empty cells for days before the month starts
            for (let i = 0; i < startingDayOfWeek; i++) {
               const emptyCell = document.createElement('div');
               emptyCell.className = 'calendar-day other-month';
               const prevMonth = new Date(year, month, 0);
               const prevDate = prevMonth.getDate() - (startingDayOfWeek - i - 1);
               emptyCell.innerHTML = `<span class="text-lg font-semibold">${prevDate}</span>`;
               calendarGrid.appendChild(emptyCell);
            }

            // Add days of the current month
            const today = new Date();
            const cutoffDate = new Date(2025, 8, 15); // September 15, 2025

            for (let day = 1; day <= daysInMonth; day++) {
               const date = new Date(year, month, day);
               const dateString = date.toISOString().split('T')[0];
               const dayCell = document.createElement('div');
               dayCell.className = 'calendar-day bg-white border border-gray-200 rounded-lg shadow-sm';

               // Check if date is in the past or after cutoff
               const isPast = date < today;
               const isAfterCutoff = date > cutoffDate;
               const isWeekend = date.getDay() === 0; // Sundays only (no service)

               let availableSlots = this.timeSlots.length;
               const bookedSlots = this.bookings[dateString] || [];
               availableSlots -= bookedSlots.length;

               if (isPast || isAfterCutoff || isWeekend) {
                  dayCell.classList.add('disabled');
               } else {
                  if (availableSlots === 0) {
                     dayCell.classList.add('fully-booked');
                  } else if (availableSlots < this.timeSlots.length) {
                     dayCell.classList.add('has-appointments');
                  }
                  
                  dayCell.addEventListener('click', () => this.selectDate(date));
               }

               // Add day number
               const dayNumber = document.createElement('span');
               dayNumber.className = 'text-lg font-semibold mb-1';
               dayNumber.textContent = day;
               dayCell.appendChild(dayNumber);

               // Add availability indicator
               if (!isPast && !isAfterCutoff && !isWeekend) {
                  const indicator = document.createElement('div');
                  indicator.className = 'text-xs';
                  indicator.innerHTML = `${availableSlots}/5 slots`;
                  dayCell.appendChild(indicator);

                  // Add booking dots
                  const dotsContainer = document.createElement('div');
                  dotsContainer.className = 'flex flex-wrap justify-center mt-1';
                  for (let i = 0; i < bookedSlots.length; i++) {
                     const dot = document.createElement('div');
                     dot.className = 'appointment-dot bg-red-400';
                     dotsContainer.appendChild(dot);
                  }
                  for (let i = bookedSlots.length; i < this.timeSlots.length; i++) {
                     const dot = document.createElement('div');
                     dot.className = 'appointment-dot bg-green-400';
                     dotsContainer.appendChild(dot);
                  }
                  dayCell.appendChild(dotsContainer);
               }

               calendarGrid.appendChild(dayCell);
            }

            // Add empty cells for days after the month ends
            const totalCells = calendarGrid.children.length;
            const remainingCells = 42 - totalCells; // 6 rows × 7 days
            for (let i = 1; i <= remainingCells; i++) {
               const emptyCell = document.createElement('div');
               emptyCell.className = 'calendar-day other-month';
               emptyCell.innerHTML = `<span class="text-lg font-semibold">${i}</span>`;
               calendarGrid.appendChild(emptyCell);
            }
         }

         selectDate(date) {
            this.selectedDate = date;
            this.selectedTime = null;
            
            //
